(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7c8398c"],{"3ff6":function(t,e,s){"use strict";var n=s("bf00"),i=s.n(n);i.a},"6fa0":function(t,e,s){"use strict";var n=s("9b6f"),i=s.n(n);i.a},"821e":function(t,e,s){},"9b6f":function(t,e,s){},bf00:function(t,e,s){},dd7b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"main"},[t._m(0),s("div",{staticClass:"loginContent"},[s("div",{staticClass:"select"},[s("p",{staticClass:"fingerLogin",class:{changeColor:t.show},on:{click:t.fingerLogin}},[t._v("指纹登录")]),s("p",{staticClass:"accountLogin",class:{changeColor:!t.show},on:{click:t.accountLogin}},[t._v("账号登录")])]),s("div",{staticClass:"loginForm",class:{loginFormChange:!t.show}},[t.show?s("fplogin",{on:{click:function(e){return t.test()}}}):t._e(),t.show?t._e():s("loginform",{attrs:{state:t.state},on:{Submit:t.userLogin}})],1)]),s("img",{staticClass:"bg2",attrs:{src:"/static/img/loginp2.png"}})])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("img",{staticClass:"bg1",attrs:{src:"/static/img/loginp1.png"}}),s("img",{staticClass:"logo",attrs:{src:"/static/img/logo.png"}}),s("p",{staticClass:"logoP"},[t._v("银信疫苗冷藏柜")]),s("p",{staticClass:"logoE"},[t._v("welcome to login system")])])}],r=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("96cf"),s("3b8d")),o=s("bd86"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"lform"},[s("Row",{staticClass:"loginform-row"},[s("Input",{attrs:{autocomplete:"off",placeholder:"账号"},on:{"on-blur":t.accountBlur},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}},[s("img",{staticClass:"icon",attrs:{slot:"suffix",src:"/static/img/user.png"},slot:"suffix"})]),s("div",{staticClass:"loginform-notice",class:{"loginform-notice-hide":t.account}},[t._v("账户不能为空")])],1),s("Row",{staticClass:"loginform-row",staticStyle:{"padding-top":"40px"}},[s("Input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},on:{"on-blur":t.passwordBlur},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}},[s("img",{staticClass:"icon",attrs:{slot:"suffix",src:"/static/img/pwd.png"},slot:"suffix"})]),s("div",{staticClass:"loginform-notice",class:{"loginform-notice-hide":t.state?t.password:t.state}},[t._v(t._s(t.state?"密码不能为空":"账户或密码不正确"))])],1),s("Row",{staticStyle:{"padding-top":"44px"}},[s("Button",{staticStyle:{height:"53px","font-size":"20px","margin-bottom":"7px"},attrs:{type:"primary",long:""},on:{click:function(e){return t.handleSubmit()}}},[t._v("登录")])],1)],1)},a=[],u=s("f121"),l={name:"loginform",data:function(){return{value:"",rember:!1,user:"",pwd:"",account:!0,password:!0}},props:{state:{type:Boolean,default:!0}},watch:{rember:function(t){t||this.CleanUser()}},methods:{SaveUser:function(){},CleanUser:function(){},GetUser:function(){},un_fingerSearch:function(){this.$device.un_fingerSearch()},accountBlur:function(){this.user?this.account=!0:this.account=!1},passwordBlur:function(){this.pwd?this.password=!0:this.password=!1},handleSubmit:function(){if(!this.user&&!this.pwd)return this.account=!1,void(this.password=!1);if(this.user)if(this.pwd){this.rember&&this.SaveUser();var t={code:this.user,password:this.pwd};this.$emit("Submit",t)}else this.password=!1;else this.account=!1}},mounted:function(){"development"!=u["a"].env&&this.un_fingerSearch()}},f=l,p=(s("3ff6"),s("2877")),g=Object(p["a"])(f,c,a,!1,null,null,null),h=g.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{position:"relative",height:"100%"}},[s("img",{staticClass:"fpbg",attrs:{src:"/static/img/fplogin.png"}}),s("P",{staticClass:"fingerTip"},[t._v("使用指纹一键登录")]),s("div",{staticClass:"fplogin-message"},[t._v(t._s(t.message))])],1)},m=[],v=s("2f62");function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(s,!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var y={name:"fplogin",data:function(){return{message:""}},computed:w({},Object(v["c"])({user:"user"})),methods:w({},Object(v["b"])({saveUser:"saveUser",saveDevice:"saveDevice"}),{disclick:function(){this.$emit("click")},fingerLogin:function(){this.$device.fingerSearch()},login:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.get("/user/queryUserByCondition",{_id:e});case 2:if(s=t.sent,_.isEmpty(s)){t.next=12;break}return this.saveUser(s.data[0]),t.next=7,this.$api.post("/user/modifyUserByCode",s);case 7:this.$device.openDoor().then((function(t){console.log("开门结果 result:"+JSON.stringify(t.rsp))})),this.un_fingerSearch(),this.$router.push("/"),t.next=13;break;case 12:this.message="登陆用户不存在";case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),un_fingerSearch:function(){this.$device.un_fingerSearch()}}),mounted:function(){var t=this;this.$device.subscribe("FINGER_MESSAGE",(function(e){if(1==e.type)t.message=e.msg;else if(2==e.type){var s=JSON.parse(e.msg).tag;null!=t.user?t.user._id==s&&(t.message="登录成功",t.$api.post("/user/modifyUserByCode",t.user),t.un_fingerSearch(),t.$device.openDoor().then((function(t){console.log("开门结果 result:"+JSON.stringify(t.rsp))})),t.$router.push("/")):t.login(s)}else 3==e.type&&(t.message=e.msg,t.fingerLogin())})),"development"!=u["a"].env&&this.fingerLogin()}},O=y,C=(s("ea6e"),Object(p["a"])(O,d,m,!1,null,null,null)),j=C.exports;function S(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function x(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?S(s,!0).forEach((function(e){Object(o["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var k={components:{loginform:h,fplogin:j},data:function(){return{show:!0,state:!0}},computed:x({},Object(v["c"])({user:"user",device:"device"})),created:function(){},methods:x({},Object(v["b"])(["saveUser"]),{login:function(t){switch(t){case"fp":this.show=!0;break;case"up":this.show=!1;break;default:break}},userLogin:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.get("/zcy/checkUser",e);case 2:if(s=t.sent,!s.data.check){t.next=13;break}return t.next=6,this.$api.post("/user/modifyUserByCode",{code:s.data.code,name:s.data.name,type:1});case 6:return n=t.sent,t.next=9,this.saveUser(n.data);case 9:this.$device.openDoor().then((function(t){console.log("开门结果 result:"+JSON.stringify(t.rsp))})),this.$router.push("/"),t.next=14;break;case 13:this.state=!1;case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),fingerLogin:function(){this.show=!0},accountLogin:function(){this.show=!1}}),mounted:function(){console.log(this.user)}},$=k,P=(s("6fa0"),Object(p["a"])($,n,i,!1,null,"3f6ddc52",null));e["default"]=P.exports},ea6e:function(t,e,s){"use strict";var n=s("821e"),i=s.n(n);i.a}}]);