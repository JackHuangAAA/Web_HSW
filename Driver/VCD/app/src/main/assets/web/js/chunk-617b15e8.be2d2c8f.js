(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-617b15e8"],{"0d43":function(e,t,n){"use strict";var a=n("7369"),i=n.n(a);i.a},2366:function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);function i(e,t){var a=t||0,i=n;return[i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]]].join("")}e.exports=i},"2b08":function(e,t,n){},7369:function(e,t,n){},"9b25":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative"}},[e.addForm?n("div",{staticClass:"black"},[n("div",{staticClass:"addForm"},[n("img",{attrs:{src:"/static/img/close.png"},on:{click:function(t){return e.cancel()}}}),n("div",{staticClass:"addForm-content"},[e.addVaccineOne?n("div",{staticClass:"vaccineAddOne"},[n("p",{staticClass:"vaccineAddName"},[e._v(e._s(e.addVaccineOne)+":")]),n("Input",{staticClass:"addInput",staticStyle:{width:"17.5625rem"},attrs:{placeholder:"请输入入库数量"},model:{value:e.vaccineOneCount,callback:function(t){e.vaccineOneCount=t},expression:"vaccineOneCount"}})],1):e._e(),e.addVaccineTwo?n("div",{staticClass:"vaccineAddTwo"},[n("p",{staticClass:"vaccineAddName"},[e._v(e._s(e.addVaccineTwo)+":")]),n("Input",{staticClass:"addInput",staticStyle:{width:"17.5625rem"},attrs:{placeholder:"请输入入库数量"},model:{value:e.vaccineTwoCount,callback:function(t){e.vaccineTwoCount=t},expression:"vaccineTwoCount"}})],1):e._e(),e.addVaccineThree?n("div",{staticClass:"vaccineAddThree"},[n("p",{staticClass:"vaccineAddName"},[e._v(e._s(e.addVaccineThree)+":")]),n("Input",{staticClass:"addInput",staticStyle:{width:"17.5625rem"},attrs:{placeholder:"请输入入库数量"},model:{value:e.vaccineThreeCount,callback:function(t){e.vaccineThreeCount=t},expression:"vaccineThreeCount"}})],1):e._e(),e.addVaccineFour?n("div",{staticClass:"vaccineAddFour"},[n("p",{staticClass:"vaccineAddName"},[e._v(e._s(e.addVaccineFour)+":")]),n("Input",{staticClass:"addInput",staticStyle:{width:"17.5625rem"},attrs:{placeholder:"请输入入库数量"},model:{value:e.vaccineFourCount,callback:function(t){e.vaccineFourCount=t},expression:"vaccineFourCount"}})],1):e._e()]),n("div",{staticClass:"addForm-choose-btn"},[n("div",{staticClass:"cancel",on:{click:function(t){return e.cancel()}}},[e._v("\n                    取消\n                ")]),n("div",{staticClass:"addYes",on:{click:function(t){return e.inStock()}}},[e._v("\n                    确定\n                ")])])])]):e._e(),n("div",{staticClass:"container"},[n("div",{staticClass:"inStockTitle"},[n("img",{staticClass:"back",attrs:{src:"/static/img/back.png"},on:{click:function(t){return e.back()}}}),n("p",{staticClass:"headP"},[e._v("请选择疫苗入库的抽屉")]),n("img",{staticClass:"vaccineIn",attrs:{src:"/static/img/vaccineIn.png"}})]),n("div",{staticClass:"main"},[e._m(0),n("div",{staticClass:"mainBottom"},[e._m(1),n("div",{staticClass:"mainBottomRight"},[n("div",{staticClass:"index"},e._l(e.row,(function(t,a){return n("p",{staticClass:"indexBlock"},[n("span",{staticClass:"indexSpan"},[e._v("第"+e._s(a+1)+"行")])])})),0),n("div",{staticClass:"cabines"},e._l(e.cabineDatas,(function(t,a){return n("div",{staticClass:"cabine",on:{click:function(t){return e.addVaccine(a)}}},[t.nameOne?n("div",{staticClass:"cabineLeft"},[n("p",{staticClass:"vaccineOneName"},[e._v(e._s(t.nameOne))]),n("p",{staticClass:"vaccineOneCount"},[e._v(e._s(t.countOne||0)+"支")])]):e._e(),t.nameTwo?n("div",{staticClass:"cabineRight"},[n("p",{staticClass:"vaccineTwoName"},[e._v(e._s(t.nameTwo))]),n("p",{staticClass:"vaccineTwoCount"},[e._v(e._s(t.countTwo||0)+"支")])]):e._e(),t.nameThree?n("div",{staticClass:"cabineLeft"},[n("p",{staticClass:"vaccineOneName"},[e._v(e._s(t.nameThree))]),n("p",{staticClass:"vaccineOneCount"},[e._v(e._s(t.countThree||0)+"支")])]):e._e(),t.nameFour?n("div",{staticClass:"cabineRight"},[n("p",{staticClass:"vaccineTwoName"},[e._v(e._s(t.nameFour))]),n("p",{staticClass:"vaccineTwoCount"},[e._v(e._s(t.countFour||0)+"支")])]):e._e()])})),0)]),n("div",{staticClass:"finish"},[n("div",{staticClass:"finishButton",on:{click:e.finishInStock}},[e._v("\n                        完成\n                    ")])])])])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mainTop"},[n("p",{staticClass:"ctOne"},[e._v("抽屉1")]),n("p",{staticClass:"ctLeft"},[e._v("左")]),n("img",{staticClass:"l_r",attrs:{src:"/static/img/l-r.png"}}),n("p",{staticClass:"ctRight"},[e._v("右")]),n("p",{staticClass:"ctTwo"},[e._v("抽屉2")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mainBottomLeft"},[n("p",{staticClass:"ctTop"},[e._v("上")]),n("img",{staticClass:"t_b",attrs:{src:"/static/img/t-b.png"}}),n("p",{staticClass:"ctBottom"},[e._v("下")])])}],c=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("96cf"),n("3b8d")),s=n("bd86"),r=n("2f62"),o=n("c437"),u=n.n(o);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={data:function(){return{commonData:null,cabineDatas:[],index:"1",row:5,addForm:!1,addVaccineOne:"",vaccineOneCode:"",addVaccineTwo:"",vaccineTwoCode:"",vaccineOneCount:null,vaccineTwoCount:null,vaccineOneId:"",vaccineTwoId:"",vaccineOneX:"",vaccineTwoX:"",vaccineOneY:"",vaccineTwoY:"",addVaccineThree:"",vaccineThreeCode:"",addVaccineFour:"",vaccineFourCode:"",vaccineThreeCount:null,vaccineFourCount:null,vaccineThreeId:"",vaccineFourId:"",vaccineThreeX:"",vaccineFourX:"",vaccineThreeY:"",vaccineFourY:"",endData:[],audio:null}},computed:h({},Object(r["c"])({user:"user",device:"device"})),components:{},methods:{queryDrawerByCondition:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,c,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cabineDatas=[],e.next=3,this.$api.get("/drawer/queryDrawerByCondition",{device:this.device._id});case 3:for(t=e.sent,n=t.data,a=0;a<10;a++){if(i=n[a].vaccine.length,c=n[a].vaccine,s={},s.x=n[a].x,s.y=n[a].y,i>0)for(r=0;r<i;r++)0==r&&(s.nameOne=c[r].name,s.countOne=c[r].surplus,s.idOne=c[r]._id,s.codeOne=c[r].code),1==r&&(s.nameTwo=c[r].name,s.countTwo=c[r].surplus,s.idTwo=c[r]._id,s.codeTwo=c[r].code),2==r&&(s.nameThree=c[r].name,s.countThree=c[r].surplus,s.idThree=c[r]._id,s.codeThree=c[r].code),3==r&&(s.nameFour=c[r].name,s.countFour=c[r].surplus,s.idFour=c[r]._id,s.codeFour=c[r].code);else s.nameOne="",s.countOne="",s.nameTwo="",s.countTwo="",s.nameThree="",s.countThree="",s.nameFour="",s.countFour="";this.cabineDatas.push(s)}case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),back:function(){this.$router.push("/main")},addVaccine:function(e){this.addVaccineOne=this.cabineDatas[e].nameOne,this.addVaccineTwo=this.cabineDatas[e].nameTwo,this.vaccineOneCount=null,this.vaccineTwoCount=null,this.vaccineOneId=this.cabineDatas[e].idOne,this.vaccineTwoId=this.cabineDatas[e].idTwo,this.vaccineOneCode=this.cabineDatas[e].codeOne,this.vaccineTwoCode=this.cabineDatas[e].codeTwo,this.vaccineOneX=this.cabineDatas[e].x,this.vaccineTwoX=this.cabineDatas[e].x,this.vaccineOneY=this.cabineDatas[e].y,this.vaccineTwoY=this.cabineDatas[e].y,this.addVaccineThree=this.cabineDatas[e].nameThree,this.addVaccineFour=this.cabineDatas[e].nameFour,this.vaccineThreeCount=null,this.vaccineFourCount=null,this.vaccineThreeId=this.cabineDatas[e].idThree,this.vaccineFourId=this.cabineDatas[e].idFour,this.vaccineThreeCode=this.cabineDatas[e].codeThree,this.vaccineFourCode=this.cabineDatas[e].codeFour,this.vaccineThreeX=this.cabineDatas[e].x,this.vaccineFourX=this.cabineDatas[e].x,this.vaccineThreeY=this.cabineDatas[e].y,this.vaccineFourY=this.cabineDatas[e].y,(this.addVaccineOne||this.addVaccineTwo||this.addVaccineThree||this.addVaccineFour)&&(this.addForm=!0,this.audio.play(),this.$device.openDrawer({num:this.vaccineOneX+"#"+this.vaccineOneY}).then((function(e){console.log(e)})).catch((function(e){console.log("open drawer error: "+e.message())})))},cancel:function(){this.addVaccineOne="",this.addVaccineTwo="",this.vaccineOneCount=null,this.vaccineTwoCount=null,this.addVaccineThree="",this.addVaccineFour="",this.vaccineThreeCount=null,this.vaccineFourCount=null,this.addForm=!1},modifyVaccineNum:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.post("/vaccine/modifyVaccineNum",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveInout:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.post("/inout/saveInout",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),inStock:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,c,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=u()(),!(this.vaccineOneId&&this.vaccineOneCount>0)){e.next=6;break}return e.next=4,this.modifyVaccineNum({id:this.vaccineOneId,total:this.vaccineOneCount,surplus:this.vaccineOneCount});case 4:return e.next=6,this.saveInout(h({batchId:t},this.commonData,{x:this.vaccineOneX,y:this.vaccineOneY,code:this.vaccineOneCode,name:this.addVaccineOne,total:this.vaccineOneCount,surplus:this.vaccineOneCount}));case 6:if(!(this.vaccineTwoId&&this.vaccineTwoCount>0)){e.next=11;break}return e.next=9,this.modifyVaccineNum({id:this.vaccineTwoId,total:this.vaccineTwoCount,surplus:this.vaccineTwoCount});case 9:return e.next=11,this.saveInout(h({batchId:t},this.commonData,{x:this.vaccineTwoX,y:this.vaccineTwoY,code:this.vaccineTwoCode,name:this.addVaccineTwo,total:this.vaccineTwoCount,surplus:this.vaccineTwoCount}));case 11:if(!(this.vaccineThreeId&&this.vaccineThreeCount>0)){e.next=16;break}return e.next=14,this.modifyVaccineNum({id:this.vaccineThreeId,total:this.vaccineThreeCount,surplus:this.vaccineThreeCount});case 14:return e.next=16,this.saveInout(h({batchId:t},this.commonData,{x:this.vaccineThreeX,y:this.vaccineThreeY,code:this.vaccineThreeCode,name:this.addVaccineThree,total:this.vaccineThreeCount,surplus:this.vaccineThreeCount}));case 16:if(!(this.vaccineFourId&&this.vaccineFourCount>0)){e.next=21;break}return e.next=19,this.modifyVaccineNum({id:this.vaccineFourId,total:this.vaccineFourCount,surplus:this.vaccineFourCount});case 19:return e.next=21,this.saveInout(h({batchId:t},this.commonData,{x:this.vaccineFourX,y:this.vaccineFourY,code:this.vaccineFourCode,name:this.addVaccineFour,total:this.vaccineFourCount,surplus:this.vaccineFourCount}));case 21:if(n=!0,a=0,!_.isEmpty(this.endData)){e.next=29;break}this.addVaccineOne&&this.endData.push({name:this.addVaccineOne,surplus:this.vaccineOneCount}),this.addVaccineTwo&&this.endData.push({name:this.addVaccineTwo,surplus:this.vaccineTwoCount}),this.addVaccineThree&&this.endData.push({name:this.addVaccineThree,surplus:this.vaccineThreeCount}),this.addVaccineFour&&this.endData.push({name:this.addVaccineFour,surplus:this.vaccineFourCount}),e.next=73;break;case 29:if(!this.addVaccineOne){e.next=40;break}i=0;case 31:if(!(i<this.endData.length)){e.next=39;break}if(this.endData[i].name!=this.addVaccineOne){e.next=36;break}return n=!1,a=i,e.abrupt("break",39);case 36:i++,e.next=31;break;case 39:n?this.endData.push({name:this.addVaccineOne,surplus:this.vaccineOneCount}):(null!=this.vaccineOneCount&&(this.endData[a].surplus=parseInt(this.endData[a].surplus)+parseInt(this.vaccineOneCount)),n=!0,a=0);case 40:if(!this.addVaccineTwo){e.next=51;break}c=0;case 42:if(!(c<this.endData.length)){e.next=50;break}if(this.endData[c].name!=this.addVaccineTwo){e.next=47;break}return n=!1,a=c,e.abrupt("break",50);case 47:c++,e.next=42;break;case 50:n?this.endData.push({name:this.addVaccineTwo,surplus:this.vaccineTwoCount}):(null!=this.vaccineTwoCount&&(this.endData[a].surplus=parseInt(this.endData[a].surplus)+parseInt(this.vaccineTwoCount)),n=!0,a=0);case 51:if(!this.addVaccineThree){e.next=62;break}s=0;case 53:if(!(s<this.endData.length)){e.next=61;break}if(this.endData[s].name!=this.addVaccineThree){e.next=58;break}return n=!1,a=s,e.abrupt("break",61);case 58:s++,e.next=53;break;case 61:n?this.endData.push({name:this.addVaccineThree,surplus:this.vaccineThreeCount}):(this.vaccineThreeCount&&(this.endData[a].surplus=parseInt(this.endData[a].surplus)+parseInt(this.vaccineThreeCount)),n=!0,a=0);case 62:if(!this.addVaccineFour){e.next=73;break}r=0;case 64:if(!(r<this.endData.length)){e.next=72;break}if(this.endData[r].name!=this.addVaccineFour){e.next=69;break}return n=!1,a=r,e.abrupt("break",72);case 69:r++,e.next=64;break;case 72:n?this.endData.push({name:this.addVaccineFour,surplus:this.vaccineFourCount}):(this.vaccineFourCount&&(this.endData[a].surplus=parseInt(this.endData[a].surplus)+parseInt(this.vaccineFourCount)),n=!0,a=0);case 73:console.log(this.endData),this.queryDrawerByCondition(),this.addForm=!1;case 76:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openDrawer:function(){for(var e=this,t=[],n="",a=this.cabineDatas,i=0;i<a.length;i++)a[i].single&&(t.push(a[i].drawerId),n+=","+a[i].x+"#"+a[i].y);""!=n&&this.$device.openDrawer({num:n.slice(1)}).then((function(n){e.$router.push({path:"/inout/scanTip",query:{openDrawerIds:t}})})).catch((function(e){console.log("open drawer error: "+e.message())}))},finishInStock:function(){this.$router.push({path:"/inout/detail",query:{action:"in",inStockDate:this.endData}})}},mounted:function(){this.endData=[],this.commonData={type:1,user:this.user._id,device:this.device._id,deviceType:1,unitCode:this.device.unitCode,unitName:this.device.unitName},this.audio=new Audio,this.audio.src="/static/audio/inputInStockCount.mp3",this.queryDrawerByCondition()}},l=v,p=(n("aa63"),n("0d43"),n("2877")),m=Object(p["a"])(l,a,i,!1,null,"61141d55",null);t["default"]=m.exports},aa63:function(e,t,n){"use strict";var a=n("2b08"),i=n.n(a);i.a},c437:function(e,t,n){var a,i,c=n("e1f4"),s=n("2366"),r=0,o=0;function u(e,t,n){var u=t&&n||0,d=t||[];e=e||{};var h=e.node||a,v=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==v){var l=c();null==h&&(h=a=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==v&&(v=i=16383&(l[6]<<8|l[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:o+1,C=p-r+(m-o)/1e4;if(C<0&&void 0===e.clockseq&&(v=v+1&16383),(C<0||p>r)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=p,o=m,i=v,p+=122192928e5;var f=(1e4*(268435455&p)+m)%4294967296;d[u++]=f>>>24&255,d[u++]=f>>>16&255,d[u++]=f>>>8&255,d[u++]=255&f;var T=p/4294967296*1e4&268435455;d[u++]=T>>>8&255,d[u++]=255&T,d[u++]=T>>>24&15|16,d[u++]=T>>>16&255,d[u++]=v>>>8|128,d[u++]=255&v;for(var w=0;w<6;++w)d[u+w]=h[w];return t||s(d)}e.exports=u},e1f4:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}}}]);