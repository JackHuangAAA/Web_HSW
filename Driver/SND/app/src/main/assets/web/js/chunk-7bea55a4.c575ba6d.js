(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bea55a4"],{"2b6e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout"},[i("div",{staticClass:"left"},[t._m(0),i("div",{staticClass:"personInfContent"},t._l(t.queue,(function(e,n){return i("div",{class:{personInf:n%2==0,personInfHeight:n%2==1}},[i("div",{staticClass:"phone"},[t._v("\n                    "+t._s(e.code)+"\n                ")]),i("div",{staticClass:"name"},[t._v("\n                    "+t._s(e.name)+"\n                ")]),i("div",{staticClass:"time"},[t._v("\n                    "+t._s(e.time>=30?"已完成":30-e.time+"分钟")+"\n                ")])])})),0)]),t._m(1)])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"personTitle"},[i("div",{staticClass:"phone"},[t._v("\n                号码\n            ")]),i("div",{staticClass:"name"},[t._v("\n                姓名\n            ")]),i("div",{staticClass:"time",staticStyle:{color:"#3E4955"}},[t._v("\n                剩余时间\n            ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("img",{attrs:{src:"static/img/check.png"}})])}],a=(i("96cf"),i("3b8d")),r=i("8055"),u=i.n(r),c=i("c1df"),o=i.n(c),h={data:function(){return{socket:u.a.connect("/"),queue:[],timer:null}},methods:{registerSocket:function(){this.socket.emit("register",JSON.stringify({code:"IST0001C"}))},freshDatas:function(){var t=this;this.socket.on("VaccinationCheck",(function(e){console.log(e),t.queryQueue()}))},queryQueue:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Date,i=e.getTime()-186e4,i=new Date(i),t.next=5,this.$api.get("/queue/queryQueueByCondition",{status:0,finishDate:i});case 5:n=t.sent,this.queue=n.data,this.time();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),time:function(){for(var t=0;t<this.queue.length;t++){var e=o()(this.queue[t].finishDate).diff(o()()._d),i=Math.abs(Math.floor(e/6e4));this.$set(this.queue[t],"time",i),this.queue[t].time>=31&&this.queue.shift(t)}}},mounted:function(){var t=this;this.registerSocket(),this.freshDatas(),this.queryQueue(),this.timer=setInterval((function(){t.time()}),6e4),__app.$emit("setTitle",{title:"留观显示屏",deviceId:"CK0001"})}},l=h,f=(i("e240"),i("2877")),v=Object(f["a"])(l,n,s,!1,null,"e766ef10",null);e["default"]=v.exports},"414d":function(t,e,i){},e240:function(t,e,i){"use strict";var n=i("414d"),s=i.n(n);s.a}}]);