<template>
    <div class="pay">
        <div class="pay-top">
            <div class="pay-back" @click="back()">返回上一页</div>
            <div class="pay-top-title">请选择付费方式，并付费</div>
        </div>
        <div class="pay-content">
            <div class="pay-content-title">{{data?data.vaccine.name:''}}<span>自费</span></div>
            <div class="pay-content-price">￥{{data?data.vaccine.cost:''}}</div>
            <div class="pay-content-notice">请选择您要支付的方式:</div>
            <div class="pay-content-box">
                <div class="pay-content-choose" v-for="(item,index) in payWays" :key="item.payWay" @click="selectPayWays(item.type)">
                    <div class="recommend" v-if="item.ifRecommend">推荐</div>
                    <img :src="item.img" alt="" class="payImg">
                    <div class="payDescribe">{{item.payWay}}</div>
                </div>
            </div>
            <detail class="detail"/>
        </div>
        
    </div>
</template>
<script>
import detail from '../../components/detail';
import { mapGetters, mapActions, mapState } from 'vuex';
export default {
    data () {
        return {
            data:{},
            payWays:[
                {ifRecommend: true,img:'/static/img/zfbBig.png',payWay:'支付宝支付',type:'ali'},
                {ifRecommend: true,img:'/static/img/wxBig.png',payWay:'微信支付',type: 'we'},
                {ifRecommend: false,img:'/static/img/peoplePay.png',payWay:'人工付费', type: 'hand'}
             ]
        }    
    },
    components:{
        detail
    },
    computed: {
        ...mapGetters({
            user: 'user',
            device: 'device'
        })
    },
    
    methods:{
        ...mapActions({
            saveUser: 'saveUser',
            saveDevice: 'saveDevice'
        }),
        selectPayWays: function(type){
            this.$router.push({path:'/pay/payQrcode',query:{way:type}});
        },
        back: function(){
            this.$router.push({path:'/register/register'});
        },
        initData(){
            //从vuex user 里获取接种数据
            this.data = this.user;
        },
    },
    mounted(){
        //初始接种数据
        this.initData();
    }
}
</script>
<style lang="less" scoped>
@import '~@/style/pay.less';
</style>